<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Christophe Benavent">
<meta name="dcterms.date" content="2023-01-25">

<title>Musiques : histoire de genres</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="script04style_files/libs/clipboard/clipboard.min.js"></script>
<script src="script04style_files/libs/quarto-html/quarto.js"></script>
<script src="script04style_files/libs/quarto-html/popper.min.js"></script>
<script src="script04style_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="script04style_files/libs/quarto-html/anchor.min.js"></script>
<link href="script04style_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="script04style_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="script04style_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="script04style_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="script04style_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<style>
    .quarto-title-block .quarto-title-banner {
      background: images/ColorWheel-Vinyl_A-Side.png;
    }
    </style>


</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Musiques : histoire de genres</h1>
            <p class="subtitle lead">Originaux et rééditions, une dynamique de cycle de vie ?</p>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      Christophe Benavent 
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              Paris Dauphine - PSL
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 25, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#préparation-des-données" id="toc-préparation-des-données" class="nav-link" data-scroll-target="#préparation-des-données"><span class="toc-section-number">2</span>  Préparation des données</a></li>
  <li><a href="#un-premier-aperçu" id="toc-un-premier-aperçu" class="nav-link" data-scroll-target="#un-premier-aperçu"><span class="toc-section-number">3</span>  Un premier aperçu</a>
  <ul class="collapse">
  <li><a href="#combien-de-styles-par-release" id="toc-combien-de-styles-par-release" class="nav-link" data-scroll-target="#combien-de-styles-par-release"><span class="toc-section-number">3.1</span>  Combien de styles par release ?</a></li>
  <li><a href="#combien-de-releases-par-style" id="toc-combien-de-releases-par-style" class="nav-link" data-scroll-target="#combien-de-releases-par-style"><span class="toc-section-number">3.2</span>  Combien de releases par style ?</a></li>
  </ul></li>
  <li><a href="#vectorization" id="toc-vectorization" class="nav-link" data-scroll-target="#vectorization"><span class="toc-section-number">4</span>  Vectorization</a>
  <ul class="collapse">
  <li><a href="#les-styles" id="toc-les-styles" class="nav-link" data-scroll-target="#les-styles"><span class="toc-section-number">4.1</span>  les styles</a></li>
  <li><a href="#typologie-et-representation-2d" id="toc-typologie-et-representation-2d" class="nav-link" data-scroll-target="#typologie-et-representation-2d"><span class="toc-section-number">4.2</span>  typologie et representation 2D</a></li>
  <li><a href="#analyser-les-similarités-des-vecteurs" id="toc-analyser-les-similarités-des-vecteurs" class="nav-link" data-scroll-target="#analyser-les-similarités-des-vecteurs"><span class="toc-section-number">4.3</span>  Analyser les similarités des vecteurs</a></li>
  </ul></li>
  <li><a href="#vectorisation-par-période" id="toc-vectorisation-par-période" class="nav-link" data-scroll-target="#vectorisation-par-période"><span class="toc-section-number">5</span>  vectorisation par période</a></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Dans cette étude on se concentre sur la question des styles. Le but est d’en donner un tableau général des évolutions et des variations. D’avoir quelques ordres de grandeurs en têtes, et de mieux cadrer les traitement ultérieurs qui porterons sur l’analyse de leurs cooccurences.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#tools</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#packages</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(word2vec)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doc2vec)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fastcluster) <span class="co">#pour aller plus vite en hc</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Rtsne)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jtools)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># pour ggplot</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>breaks <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1900</span>, <span class="dv">1910</span>, <span class="dv">1920</span>,<span class="dv">1930</span>,<span class="dv">1940</span>,<span class="dv">1950</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>                                <span class="dv">1960</span>,<span class="dv">1970</span>,<span class="dv">1980</span>,<span class="dv">1990</span>,<span class="dv">2000</span>,<span class="dv">2010</span>,<span class="dv">2020</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co">#  les couleurs des genres . Y-a-il une conventions ?</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>col_genre<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"blue4"</span>,<span class="st">"coral4"</span>,<span class="st">"skyblue"</span>,<span class="st">"purple"</span> , <span class="st">"darkturquoise"</span>,<span class="st">"darkgreen"</span>,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"orange1"</span>,<span class="st">"orange3"</span>,<span class="st">"dodgerblue4"</span>,<span class="st">"darkred"</span>,<span class="st">"black"</span>,<span class="st">"deeppink2"</span>,<span class="st">"limegreen"</span>,<span class="st">"red3"</span>,<span class="st">"grey"</span>)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>                    </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>col_format<span class="ot">=</span><span class="fu">c</span>(<span class="st">"brown4"</span>,  <span class="st">"skyblue1"</span>, <span class="st">"skyblue2"</span>, <span class="st">"skyblue3"</span>,<span class="st">"grey"</span>,<span class="st">"cyan"</span>,  <span class="st">"grey30"</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>col_pays<span class="ot">=</span> <span class="fu">c</span>(<span class="st">"black"</span>, <span class="st">"green3"</span>,<span class="st">"green1"</span>,<span class="st">"lightblue1"</span>, <span class="st">"yellow"</span>, <span class="st">"lightblue2"</span>, <span class="st">"orange1"</span>, <span class="st">"lightblue4"</span>, <span class="st">"dodgerblue3"</span>, <span class="st">"dodgerblue1"</span>, <span class="st">"dodgerblue2"</span>,<span class="st">"green2"</span>,<span class="st">"lightblue3"</span>, <span class="st">"white"</span>, <span class="st">"green4"</span>, <span class="st">"orange2"</span>, <span class="st">"orange3"</span>, <span class="st">"blue3"</span>, <span class="st">"blue4"</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_minimal</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="préparation-des-données" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Préparation des données</h1>
<p>Nours reprenons le fichier de l’étude précédente qui caractérise les releases, et nous chargeons celui des styles .</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>t1<span class="ot">&lt;-</span><span class="fu">Sys.time</span>()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>release<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"./dataarchives/release_work.csv"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>X)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>style<span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"dataarchives/release_style2.txt"</span>)<span class="sc">%&gt;%</span> <span class="co">#pb encodage</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">category=</span><span class="st">"Style"</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">style=</span><span class="fu">tolower</span>(style), </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">style=</span><span class="fu">str_replace_all</span>(style,<span class="st">" "</span>,<span class="st">""</span>),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">style=</span><span class="fu">str_replace_all</span>(style,<span class="st">"-"</span>,<span class="st">""</span>))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>genre<span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"dataarchives/release_genre.csv"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">genre=</span><span class="fu">str_replace_all</span>(genre,<span class="st">"[:punct:]"</span>,<span class="st">""</span>),</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">genre=</span><span class="fu">str_replace_all</span>(genre,<span class="st">" "</span>,<span class="st">""</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id=</span><span class="dv">1</span>,<span class="at">style=</span>genre) <span class="sc">%&gt;%</span> </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">category=</span><span class="st">"Genre"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>t2<span class="ot">&lt;-</span><span class="fu">Sys.time</span>()</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>t<span class="ot">=</span>t2<span class="sc">-</span>t1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="un-premier-aperçu" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Un premier aperçu</h1>
<p>Pour un premier aperçu, deux questions symétriques :</p>
<ul>
<li>Combien de styles par release, ce qui permet d’approfondir le questionnement sur le diversité</li>
<li>Combien de sorties par style, pour commencer à appréhender le champs.</li>
</ul>
<section id="combien-de-styles-par-release" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="combien-de-styles-par-release"><span class="header-section-number">3.1</span> Combien de styles par release ?</h2>
<p>L’accroissement continu peut trouver plusieurs explications</p>
<ul>
<li><p>La tendance inexorable du métissage</p></li>
<li><p>La tendance des annotateurs à nuancer leur etiquettage.</p></li>
</ul>
<p>L’anomalie de 65-80.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>foo<span class="ot">&lt;-</span> style <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id)<span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_style=</span><span class="fu">n</span>())</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(foo,<span class="fu">aes</span>(<span class="at">x=</span>n_style))<span class="sc">+</span>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Nombre de styles"</span>, <span class="at">y=</span><span class="st">"Nombre d'éditions"</span>)<span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill=</span><span class="st">"skyblue3"</span>)<span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"skyblue3"</span>, <span class="st">"skyblue1"</span>)) <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_x_continuous(breaks = breaks, limits = c(1940, 2020))+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_y_continuous</span>(<span class="at">label=</span>comma,<span class="at">trans=</span><span class="st">"log10"</span>)<span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_continuous</span>(<span class="at">label=</span>comma , <span class="at">breaks =</span><span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">60</span>,<span class="dv">70</span>,<span class="dv">80</span>,<span class="dv">90</span>,<span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/02-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">"./images/genre10.jpeg"</span>, <span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">18</span>, <span class="at">units =</span> <span class="st">"cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>foo2<span class="ot">&lt;-</span> release<span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(foo)<span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year,version)<span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_style_m=</span><span class="fu">mean</span>(n_style, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">n_style_d=</span><span class="fu">sd</span>(n_style, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(foo2,<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>n_style_m,<span class="at">group=</span>version))<span class="sc">+</span>  </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="st">"Nombre de styles"</span>)<span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> n_style_m <span class="sc">-</span> n_style_d<span class="sc">/</span><span class="dv">40</span>, </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ymax =</span> n_style_m <span class="sc">+</span> n_style_d<span class="sc">/</span><span class="dv">40</span>, </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill=</span>version), <span class="at">alpha=</span>.<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"skyblue3"</span>, <span class="st">"skyblue1"</span>)) <span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_x_continuous(breaks = breaks, limits = c(1940, 2020))+</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span><span class="fu">c</span>(<span class="fl">1.2</span>,<span class="fl">1.4</span>, <span class="fl">1.6</span>, <span class="fl">1.8</span>, <span class="dv">2</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">1.2</span>,<span class="fl">2.2</span>))<span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_continuous</span>( <span class="at">breaks =</span>breaks,<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1940</span>,<span class="dv">2020</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/03-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">"./images/genre11.jpeg"</span>, <span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">18</span>, <span class="at">units =</span> <span class="st">"cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="combien-de-releases-par-style" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="combien-de-releases-par-style"><span class="header-section-number">3.2</span> Combien de releases par style ?</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>foo<span class="ot">&lt;-</span> style <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(style)<span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_release=</span><span class="fu">n</span>())<span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n_release))<span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">rank=</span><span class="fu">rank</span>(n_release, <span class="at">ties.method=</span><span class="st">'random'</span>),</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">sum=</span><span class="fu">cumsum</span>(n_release))</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(foo,<span class="fu">aes</span>(<span class="at">x=</span><span class="dv">604</span><span class="sc">-</span>rank,<span class="at">y=</span>sum))<span class="sc">+</span>  </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"rang des styles"</span>, <span class="at">y=</span><span class="st">"Nombre d'éditions"</span>)<span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">fill=</span><span class="st">"skyblue3"</span>)<span class="sc">+</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>   <span class="fu">scale_y_continuous</span>(<span class="at">label=</span>comma )<span class="sc">+</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_x_continuous</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/04-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">"./images/genre12.jpeg"</span>, <span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">18</span>, <span class="at">units =</span> <span class="st">"cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>foo2<span class="ot">&lt;-</span>foo <span class="sc">%&gt;%</span><span class="fu">filter</span>(n_release<span class="sc">&gt;</span><span class="dv">20000</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggwordcloud)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(foo2, <span class="fu">aes</span>(<span class="at">label =</span> style, <span class="at">size =</span> n_release)) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud</span>() <span class="sc">+</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/05-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">"./images/genre13.jpeg"</span>, <span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">18</span>, <span class="at">units =</span> <span class="st">"cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Cette première représentation est confuse, si le pop-rock domine, rien ne dit vraiment des tendances.</p>
</section>
</section>
<section id="vectorization" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Vectorization</h1>
<p>le but de la vectorization est de représenter chaque style, puis chaque édition, par un vecteur. Pour Augmenter l’information on va y ajouter les genres.</p>
<p>L’analyse est réduite au corpus des originaux pour saisir au plus prêt de la création les indications de style et pour une raison de calcul, on passe de 13 millions à 7 millions d’oeuvres dans le corpus.</p>
<p>On distingue genre et style par la majuscule.</p>
<p>Le calcul prend du temps, plusieurs heures sur 4 coeurs.</p>
<section id="les-styles" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="les-styles"><span class="header-section-number">4.1</span> les styles</h2>
<p>Le modèle Word2vec va nous permettre d’obtenir les embeddings des 603 styles identifiés et des 15 genres. On garde les majuscules pour identifier les genre, les styles ont été mis en minuscule auparavant.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>text1<span class="ot">&lt;-</span><span class="fu">rbind</span>(genre,style) <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(release)<span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(version<span class="sc">==</span><span class="st">"Original"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id,title, pays2, date, style,category)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>vocab<span class="ot">&lt;-</span>text1 <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(style)<span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>text2<span class="ot">&lt;-</span>text1 <span class="sc">%&gt;%</span>  </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarise</span>(<span class="at">description =</span> <span class="fu">paste</span>(style, <span class="at">collapse =</span> <span class="st">" "</span>))</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(text2, <span class="st">"./dataarchives/text2.csv"</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">#text3&lt;- txt_clean_word2vec(text2, ascii = TRUE, alpha = FALSE, tolower = FALSE, trim = TRUE)</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#on vectorise</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>t1<span class="ot">&lt;-</span><span class="fu">Sys.time</span>()</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123456789</span>)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">word2vec</span>(<span class="at">x =</span> text2<span class="sc">$</span>description, </span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>                  <span class="at">type =</span> <span class="st">"skip-gram"</span>, </span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>                  <span class="at">window =</span> <span class="dv">8</span>, </span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>                  <span class="at">dim =</span> <span class="dv">100</span>, </span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">iter =</span> <span class="dv">100</span>,</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>                  <span class="at">threads =</span> 4L,</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min_count =</span> 10L,</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>                  <span class="at">verbose=</span><span class="cn">TRUE</span>)</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>t2<span class="ot">&lt;-</span><span class="fu">Sys.time</span>()</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>t_2<span class="ot">=</span> t2<span class="sc">-</span>t1</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>embedding <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(model)</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="co">#on sauvegarde le model pour des usages ultérieurs</span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(embedding, <span class="st">"./dataarchives/embedding.csv"</span>)</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"./dataarchives/mymodel.bin"</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a><span class="fu">write.word2vec</span>(model, <span class="at">file =</span> path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="typologie-et-representation-2d" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="typologie-et-representation-2d"><span class="header-section-number">4.2</span> typologie et representation 2D</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">read.word2vec</span>(path)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>embedding <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(model)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#test sur le genre Rock</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>lookslike <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, <span class="fu">c</span>(<span class="st">"hiphop"</span>), <span class="at">type =</span> <span class="st">"nearest"</span>, <span class="at">top_n =</span> <span class="dv">20</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>lookslike</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$hiphop
    term1          term2 similarity rank
1  hiphop    raggahiphop  0.7655274    1
2  hiphop         bounce  0.7438365    2
3  hiphop          crunk  0.7285991    3
4  hiphop      bassmusic  0.7247390    4
5  hiphop        bigbeat  0.7011963    5
6  hiphop          cutup  0.6999353    6
7  hiphop             dj  0.6964343    7
8  hiphop      conscious  0.6956685    8
9  hiphop        thugrap  0.6956552    9
10 hiphop    jazzyhiphop  0.6938808   10
11 hiphop          grime  0.6872808   11
12 hiphop        gangsta  0.6840849   12
13 hiphop       ukgarage  0.6766056   13
14 hiphop       cloudrap  0.6765231   14
15 hiphop    turntablism  0.6701896   15
16 hiphop hardcorehiphop  0.6698946   16
17 hiphop    garagehouse  0.6697022   17
18 hiphop     brokenbeat  0.6543210   18
19 hiphop     horrorcore  0.6531496   19
20 hiphop      miamibass  0.6520440   20</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#on typologise des termes</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fastcluster) <span class="co">#pour aller plus vite</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>k<span class="ot">=</span><span class="dv">25</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>distance<span class="ot">&lt;-</span><span class="fu">as.dist</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="fu">cor</span>(<span class="fu">t</span>(embedding)))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>arbre <span class="ot">&lt;-</span> <span class="fu">hclust</span>(distance, <span class="at">method =</span> <span class="st">"ward.D2"</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(arbre,  <span class="at">xlab =</span> <span class="st">""</span>, <span class="at">ylab =</span> <span class="st">""</span>, <span class="at">sub =</span> <span class="st">""</span>, <span class="at">axes =</span> <span class="cn">FALSE</span>, <span class="at">hang =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">rect.hclust</span>(arbre,k, <span class="at">border =</span> <span class="st">"green3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/07-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>group<span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">cutree</span>(arbre, <span class="at">k =</span> k))</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>group<span class="ot">&lt;-</span> group <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var=</span><span class="st">"style"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">group=</span><span class="dv">2</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(vocab, <span class="at">by=</span><span class="st">"style"</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggwordcloud)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(group, <span class="fu">aes</span>(<span class="at">label =</span> style, <span class="at">size =</span> <span class="fu">log10</span>(n), <span class="at">color=</span>n)) <span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_wordcloud_area</span>(<span class="at">area_corr =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(group), <span class="at">ncol=</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/07-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">"cluster_word.jpeg"</span>, <span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">18</span>, <span class="at">units =</span> <span class="st">"cm"</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>tsne_out <span class="ot">&lt;-</span> <span class="fu">Rtsne</span>(embedding,<span class="at">perplexity =</span> <span class="dv">8</span>, <span class="at">dim=</span><span class="dv">2</span>) <span class="co"># Run TSNE</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>tsne_out2<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(tsne_out<span class="sc">$</span>Y)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">#lemma&lt;-rownames(embedding)</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>tsne_out3<span class="ot">&lt;-</span><span class="fu">cbind</span>(tsne_out2,group) <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(vocab) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n<span class="sc">&gt;</span><span class="dv">4</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>c25 <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dodgerblue2"</span>, <span class="st">"#E31A1C"</span>, <span class="co"># red</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"green4"</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#6A3D9A"</span>, <span class="co"># purple</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#FF7F00"</span>, <span class="co"># orange</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"black"</span>, <span class="st">"gold1"</span>,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"skyblue2"</span>, <span class="st">"#FB9A99"</span>, <span class="co"># lt pink</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"palegreen2"</span>,</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#CAB2D6"</span>, <span class="co"># lt purple</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"#FDBF6F"</span>, <span class="co"># lt orange</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gray70"</span>, <span class="st">"khaki2"</span>,</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"maroon"</span>, <span class="st">"orchid1"</span>, <span class="st">"deeppink1"</span>, <span class="st">"blue1"</span>, <span class="st">"steelblue4"</span>,</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"darkturquoise"</span>, <span class="st">"green1"</span>, <span class="st">"yellow4"</span>, <span class="st">"yellow3"</span>,</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"darkorange4"</span>, <span class="st">"brown"</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>tsne_out3<span class="sc">%&gt;%</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>V1, <span class="at">y=</span>V2, <span class="at">label=</span>style))<span class="sc">+</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label=</span><span class="fu">ifelse</span>(n<span class="sc">&gt;</span><span class="dv">14</span>,style,<span class="st">""</span>),<span class="at">size=</span>n,<span class="at">color=</span><span class="fu">as.factor</span>(group)),<span class="at">max.overlaps=</span><span class="dv">20</span>)<span class="sc">+</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Projection 2D du vocabulaire vectorisé des 110 articles 'NLP &amp; Marketing' "</span>,</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle=</span><span class="st">"Pipe : annot. syntax -&gt; word2vec: 200 vecteurs-&gt; hclus -&gt;rtsne"</span>,</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span> <span class="cn">NULL</span>, <span class="at">y=</span><span class="cn">NULL</span>)<span class="sc">+</span> </span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values=</span>c25) <span class="sc">+</span>  </span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/07-3.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">"vector_word.jpeg"</span>, <span class="at">plot=</span><span class="fu">last_plot</span>(), <span class="at">width =</span> <span class="dv">27</span>, <span class="at">height =</span> <span class="dv">18</span>, <span class="at">units =</span> <span class="st">"cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="analyser-les-similarités-des-vecteurs" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="analyser-les-similarités-des-vecteurs"><span class="header-section-number">4.3</span> Analyser les similarités des vecteurs</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#titre&lt;-UD %&gt;%group_by</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>x      <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">doc_id           =</span> text2<span class="sc">$</span>id, </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">text             =</span> text2<span class="sc">$</span>description, </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#x$text &lt;- txt_clean_word2vec(x$text, tolower=TRUE)</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>emb <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">doc2vec</span>(model, x<span class="sc">$</span>text,  <span class="at">split =</span> <span class="st">" "</span>,<span class="at">type =</span> <span class="st">"embedding"</span>))<span class="sc">%&gt;%</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>release_emb<span class="ot">&lt;-</span><span class="fu">cbind</span>(text2,emb)<span class="sc">%&gt;%</span><span class="fu">left_join</span>(release)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(text1)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(style)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(text2)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(release)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(genre)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(emb)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>foo<span class="ot">&lt;-</span> release_emb <span class="sc">%&gt;%</span> </span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, year, <span class="dv">3</span><span class="sc">:</span><span class="dv">102</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year)<span class="sc">%&gt;%</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">101</span>, <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))<span class="sc">%&gt;%</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(year<span class="sc">&gt;</span><span class="dv">1939</span> <span class="sc">&amp;</span> year<span class="sc">&lt;</span><span class="dv">2021</span>)<span class="sc">%&gt;%</span><span class="fu">column_to_rownames</span>(<span class="at">var=</span><span class="st">"year"</span>)</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FactoMineR)</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>res.pca<span class="ot">&lt;-</span><span class="fu">PCA</span>(foo, <span class="at">ncp =</span> <span class="dv">5</span>, <span class="at">graph =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/08-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/08-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>eig.val <span class="ot">&lt;-</span> <span class="fu">get_eigenvalue</span>(res.pca)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>eig.val</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         eigenvalue variance.percent cumulative.variance.percent
Dim.1  6.663646e+01     6.663646e+01                    66.63646
Dim.2  1.652657e+01     1.652657e+01                    83.16304
Dim.3  5.926426e+00     5.926426e+00                    89.08946
Dim.4  3.347808e+00     3.347808e+00                    92.43727
Dim.5  2.113928e+00     2.113928e+00                    94.55120
Dim.6  1.518784e+00     1.518784e+00                    96.06998
Dim.7  1.283074e+00     1.283074e+00                    97.35306
Dim.8  7.432444e-01     7.432444e-01                    98.09630
Dim.9  5.578206e-01     5.578206e-01                    98.65412
Dim.10 2.883063e-01     2.883063e-01                    98.94243
Dim.11 2.186971e-01     2.186971e-01                    99.16113
Dim.12 1.862294e-01     1.862294e-01                    99.34736
Dim.13 1.240646e-01     1.240646e-01                    99.47142
Dim.14 7.822574e-02     7.822574e-02                    99.54965
Dim.15 7.085684e-02     7.085684e-02                    99.62050
Dim.16 5.092088e-02     5.092088e-02                    99.67142
Dim.17 4.632551e-02     4.632551e-02                    99.71775
Dim.18 3.755556e-02     3.755556e-02                    99.75531
Dim.19 3.228081e-02     3.228081e-02                    99.78759
Dim.20 3.017651e-02     3.017651e-02                    99.81776
Dim.21 2.380951e-02     2.380951e-02                    99.84157
Dim.22 2.096359e-02     2.096359e-02                    99.86254
Dim.23 1.920481e-02     1.920481e-02                    99.88174
Dim.24 1.616917e-02     1.616917e-02                    99.89791
Dim.25 1.132387e-02     1.132387e-02                    99.90923
Dim.26 1.043320e-02     1.043320e-02                    99.91967
Dim.27 9.029805e-03     9.029805e-03                    99.92870
Dim.28 8.106395e-03     8.106395e-03                    99.93680
Dim.29 7.490788e-03     7.490788e-03                    99.94429
Dim.30 6.517340e-03     6.517340e-03                    99.95081
Dim.31 5.581628e-03     5.581628e-03                    99.95639
Dim.32 5.225812e-03     5.225812e-03                    99.96162
Dim.33 4.971415e-03     4.971415e-03                    99.96659
Dim.34 4.023412e-03     4.023412e-03                    99.97061
Dim.35 3.542593e-03     3.542593e-03                    99.97416
Dim.36 3.277848e-03     3.277848e-03                    99.97743
Dim.37 2.794608e-03     2.794608e-03                    99.98023
Dim.38 2.291120e-03     2.291120e-03                    99.98252
Dim.39 1.895716e-03     1.895716e-03                    99.98442
Dim.40 1.629010e-03     1.629010e-03                    99.98604
Dim.41 1.442727e-03     1.442727e-03                    99.98749
Dim.42 1.338335e-03     1.338335e-03                    99.98883
Dim.43 1.289322e-03     1.289322e-03                    99.99011
Dim.44 1.190345e-03     1.190345e-03                    99.99131
Dim.45 1.069441e-03     1.069441e-03                    99.99237
Dim.46 9.588733e-04     9.588733e-04                    99.99333
Dim.47 7.761418e-04     7.761418e-04                    99.99411
Dim.48 6.659562e-04     6.659562e-04                    99.99478
Dim.49 5.843661e-04     5.843661e-04                    99.99536
Dim.50 5.534517e-04     5.534517e-04                    99.99591
Dim.51 4.517665e-04     4.517665e-04                    99.99637
Dim.52 4.164067e-04     4.164067e-04                    99.99678
Dim.53 3.560454e-04     3.560454e-04                    99.99714
Dim.54 3.108499e-04     3.108499e-04                    99.99745
Dim.55 3.091546e-04     3.091546e-04                    99.99776
Dim.56 2.658898e-04     2.658898e-04                    99.99802
Dim.57 2.473579e-04     2.473579e-04                    99.99827
Dim.58 2.064662e-04     2.064662e-04                    99.99848
Dim.59 1.973389e-04     1.973389e-04                    99.99867
Dim.60 1.820932e-04     1.820932e-04                    99.99886
Dim.61 1.635669e-04     1.635669e-04                    99.99902
Dim.62 1.476434e-04     1.476434e-04                    99.99917
Dim.63 1.209345e-04     1.209345e-04                    99.99929
Dim.64 1.035356e-04     1.035356e-04                    99.99939
Dim.65 8.930243e-05     8.930243e-05                    99.99948
Dim.66 7.905304e-05     7.905304e-05                    99.99956
Dim.67 6.870057e-05     6.870057e-05                    99.99963
Dim.68 6.748384e-05     6.748384e-05                    99.99970
Dim.69 5.392679e-05     5.392679e-05                    99.99975
Dim.70 4.927723e-05     4.927723e-05                    99.99980
Dim.71 4.627798e-05     4.627798e-05                    99.99985
Dim.72 3.358296e-05     3.358296e-05                    99.99988
Dim.73 2.543414e-05     2.543414e-05                    99.99991
Dim.74 2.009116e-05     2.009116e-05                    99.99993
Dim.75 1.932106e-05     1.932106e-05                    99.99994
Dim.76 1.662528e-05     1.662528e-05                    99.99996
Dim.77 1.363726e-05     1.363726e-05                    99.99998
Dim.78 1.001733e-05     1.001733e-05                    99.99999
Dim.79 9.120927e-06     9.120927e-06                    99.99999
Dim.80 5.782454e-06     5.782454e-06                   100.00000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_ind</span> (res.pca, <span class="at">col.ind =</span> <span class="st">"cos2"</span>,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">gradient.cols =</span> <span class="fu">c</span>(<span class="st">"#00AFBB"</span>, <span class="st">"#E7B800"</span>, <span class="st">"#FC4E07"</span>),</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">repel =</span> <span class="cn">TRUE</span> <span class="co"># Évite le chevauchement de texte</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>             )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="script04style_files/figure-html/08-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="vectorisation-par-période" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> vectorisation par période</h1>
<p>La question du temps a été abordées différentes solutions sont proposées - le compass - la restimation à partir de la solution t-1 - Dans cette section on va refaire exercice précédent mais en prenant en compte le temps, on distinguera chaque token par sa temporalité, une période de 5 ans. Pour réaliser cette tâche on transforme les tokens avec un suffixe *_YYYY* ( pas de ref)</p>
<p>Comment prendre en compte les corrélation inter temporelles ? Pour mesurer l’évolution d’un style une approche simple est de considerer que si les espace construits pour chaque période peuvent être différents, les relations entre les styles ne sont pas supposées se modifier. Une variation de la corrélation ( cosinus) entre deux style, peut être appréciée comme un changement de signification.</p>
<p>Cette idée permet une mise en oeuvre simple : on construit autant de modèles que de période de temps, au sein de chacun des période on calcule la matrice des cos, On examine ensuite l’évolution de ces cos dans le temps.</p>
<p>On pourra ainsi pour un style donné considérer son glissement (drift) en examinant quels sont les genre qui s’en rapproche et qui s’en éloigent. Cette approche permet de se débarrasser de la nécessité d’un espace commun à travers le temps, et de ne pas chercher la dérive d’un style dans uh espace de référence, mais les dérives des styles concommittants.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>