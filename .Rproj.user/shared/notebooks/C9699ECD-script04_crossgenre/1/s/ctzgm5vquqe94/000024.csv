"0",""
"0","## simple example"
"0","for(i in 1980:2020){"
"0",""
"0","  foo2a<-foo1 %>% "
"0","  filter(year==i)%>% "
"0","  column_to_rownames(var=""target"") %>%"
"0","  select(-year)"
"0",""
"0","foo2b<-foo1 %>% "
"0","  filter(year==i+1)%>% "
"0","  column_to_rownames(var=""target"") %>%"
"0","  select(-year)"
"0",""
"0","resa<- mds <- foo2a %>%"
"0","  dist()  %>%          "
"0","  mds( type = ""ordinal"")"
"0",""
"0","resb<- mds <- foo2b %>%"
"0","  dist()  %>%          "
"0","  mds( type = ""ordinal"")"
"0",""
"0","fit <-Procrustes(resa$conf, resb$conf)"
"0",""
"0","conf_a<-fit$X %>% as.data.frame"
"0","conf_b<-fit$Yhat%>% as.data.frame"
"0",""
"0","Procust<-cbind(conf_a,conf_b) %>%"
"0","  rename(D1b=3,D2b=4)%>%"
"0","  mutate(year=i)"
"0",""
"0","foo<- rbind(foo,Procust)"
"0",""
"0","ggplot(Procust, aes(x=D1,y=D2))+"
"0","  geom_text_repel(aes(label=row.names(Procust)))+"
"0","  geom_segment(mapping=aes(x=D1, y=D2, xend=D1b, yend=D2b), "
"0","               arrow=arrow(length = unit(0.3, ""cm"")), size=.5, "
"0","               color=""grey"")"
"0",""
"0","}"
"0",""
"0","       "
